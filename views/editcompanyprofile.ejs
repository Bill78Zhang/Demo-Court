<!DOCTYPE html>
<html lang="en">
<head>
  <title> Edit profile</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/edit.css">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable=no">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/pdf.js"></script>
<script src="/js/pdf.worker.js"></script>
<style type="text/css">

#upload-button {
	width: 400px;
	display: block;

}

#file-to-upload {
	display: none;
}

#pdf-main-container {
	width: 400px;
	margin: 20px auto;
}

#pdf-loader {
	display: none;
	text-align: center;
	color: #999999;
	font-size: 13px;
	line-height: 100px;
	height: 100px;
}

#pdf-contents {
	display: none;
}

#pdf-meta {
	overflow: hidden;
	margin: 0 0 20px 0;
}

#pdf-buttons {
	float: left;
}

#page-count-container {
	float: right;
}

#pdf-current-page {
	display: inline;
}

#pdf-total-pages {
	display: inline;
}

#pdf-canvas {
	border: 1px solid rgba(0,0,0,0.2);
	box-sizing: border-box;
}

#page-loader {
	height: 100px;
	line-height: 100px;
	text-align: center;
	display: none;
	color: #999999;
	font-size: 13px;
}
#navbar {
  overflow: hidden;
  background-color: black;
  z-index: 10;
}

#navbar a {
  float: left;
  display: block;
  
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 20px;
}


#navbar a.active {
  background-color: #4CAF50;
  color: white;
}



.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

.sticky + .content {
  padding-top: 60px;
}
img {
    max-width: 100%;
    max-height: 100%;
}
.bg-image {
  /* The image used */
  background-image: url("Our 2.png");
  
  /* Add the blur effect */
 
  /* Full height */
  height: 150%; 
  width: auto;
  
  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  z-index: -1;
  color: white;
}
.bg-image1 {
  /* The image used */
  background-image: url("images/about3.png");
 
  
  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  z-index: -1;
  color: white;
  width: 100%;
  max-height: 100%;
}
.cs
{
  font-size: 15px; font-family: Times New Roman;
  color: white;
}
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-color: #333333;
}

li {
  float: left;

}

li a {
  display: block;
  color: white;
  text-align: center;
  padding: 16px;
  text-decoration: none;
}

li a:hover {
  background-color: #111111;
}
.v1{width:88%;margin:auto;}
.col-md-4{font-size: 20px;}
</style>
</head>


<body>

<div id="navbar" >
  <ul>
    <li><a class="navbar-brand " href="/"><img src="images/logoc.png" width="150" height="200"   ></a></li>
    <li><a href='/editProfile' style="color: white;">Setting</a></li>
    <li><a href="/logout" style="color: white;">Sign out</a></li>
 
		
      <li style="float: right;"><a class="nav-link " href="/postjob"><img src="images/upload.png" alt="logo" style="width:40px;" ></a></li>
      <li style="float: right;"><a href="/companyPage"><img src="images/visitor2.jpeg" class=" rounded-circle" alt="Cinque Terre" width="40" height="40"  ></a></li>
       
   
  </ul>
</div>
  <div class="p-5 row ">
    <div class="col-sm-3" style="background-color:bg-light;">
      <div >
        <a class="nav-link text-dark" href="#"><img src="<%=avatar%>" class=" rounded-circle center" alt="Cinque Terre" width="60" height="60"></a>
        <p style="text-align: center;"><b><%=name%></b></p>
        <p style="text-align: center;">Joined: <%=createTime%> </p>
          <div class="vertical-menu p-2 " style="background-color: bg-light;  margin: auto;">
          <a href="#" class="active" style="text-align: center;"><b>Setting</b></a>
          <a href="/companyAccount" style="text-align: center;">Account</a>
          <a href="/companyProfile" style="text-align: center;"><b>Profile</b></a>
          <!-- <a href="/resetPage" style="text-align: center;">Reset Password</a> -->
        </div>
      </div>
      
    </div>

    <div class="col-sm-9 bg-light" style="background-color:lavenderblush;">
      <div class="col-sm-10 center">
        <h4><b>Profile</b></h4>
        
          <h5><b>Company Logo</b></h5>
          <div class="row" style="padding: 10px;">
              <div class="col-sm-3">
                <img src="<%=avatar%>" class=" rounded-circle " alt="Cinque Terre" width="60" height="60">
              </div>
              <div class="col-sm-3" >
                <form action="/updatedAvatar" method = "POST" enctype="multipart/form-data">
                <input type="file" style="margin-bottom: 5px;" id="avatar" name = 'video' style="margin: auto;" value = "Change My Avatar"> 
                <input type="submit"  value = "Change My Logo">
                </form>
               </div>
          </div>
        <div>
         <form action="/EditDiscription" method = "POST">
          <label for="comment">Bio</label>
          <p style="color: grey ">Write a short bio to introduce your company. (160 characters max)</p>
          <textarea class="form-control" rows="3" id="comment" name="updatedBio"><%=discription%></textarea>
          <p class="p-2"></p>
          <button type="submit" class="btn btn-primary">Change</button>
          <p class="p-2"></p>
          </form>
          <form action="/EditCompanyWebsite" method = "POST">
          <p><label for="comment"> Business Website</label></p>
          
          <textarea class="form-control" rows="1" id="comment" name="updatedWebsite"><%=website%></textarea>
          <p class="p-2"></p>
          <button type="submit" class="btn btn-primary">Change</button>
          <p class="p-2"></p>
          </form>
          <form action="/EditPhoneNumber" method="POST">
          <label for="comment">Contact number:</label>
          <textarea class="form-control" rows="1" id="comment" name="updatedPhone"><%=phoneNumber%></textarea>
          <p class="p-2"></p>
          <button type="submit" class="btn btn-primary">Change</button>
          <p class="p-2"></p>
          </form>
          <form action="/EditLocation" method="POST" enctype="multipart/form-data">
          <label for="comment">Location</label>
          <p style="color: grey ">Share the address of your company.</p>
          <textarea class="form-control" rows="1" id="comment" name="updatedLocation"><%=location%></textarea>
          <p class="p-2"></p>
          <button type="submit" class="btn btn-primary">Change</button>
          <p class="p-2"></p>
        <!-- </form>
   
 <label for="comment" >Resume</label>
 
 <p style="color: grey ">Upload your resume here</p>
    <button id="upload-button">Select Resume</button> 
    <form action="/EditResume" method="POST" enctype="multipart/form-data">
<input type="file" id="file-to-upload" name = 'video' accept="application/pdf" />
<p class="p-2"></p>
          <button type="submit" class="btn btn-primary">save</button>
          <p class="p-2"></p>

</form> -->
<div id="pdf-main-container">
	<div id="pdf-loader">Loading document ...</div>
	<div id="pdf-contents">
		<div id="pdf-meta">
			<div id="pdf-buttons">
				<button id="pdf-prev">Previous</button>
				<button id="pdf-next">Next</button>
			</div>
			<div id="page-count-container">Page <div id="pdf-current-page"></div> of <div id="pdf-total-pages"></div></div>
		</div>
		<canvas id="pdf-canvas" width="400"></canvas>
		<div id="page-loader">Loading page ...</div>
	</div>
</div>

        </div>
      </div>
    </div>

  </div>
  <!--End of row-->
</div>
</form>
<script>
$(document).ready(function(){
    $('[data-toggle="popover"]').popover({html:true});   
});
function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "ajax_info.txt", true);
  xhttp.send();
}
</script>
   <script>

var __PDF_DOC,
	__CURRENT_PAGE,
	__TOTAL_PAGES,
	__PAGE_RENDERING_IN_PROGRESS = 0,
	__CANVAS = $('#pdf-canvas').get(0),
	__CANVAS_CTX = __CANVAS.getContext('2d');

function showPDF(pdf_url) {
	$("#pdf-loader").show();

	PDFJS.getDocument({ url: pdf_url }).then(function(pdf_doc) {
		__PDF_DOC = pdf_doc;
		__TOTAL_PAGES = __PDF_DOC.numPages;
		
		// Hide the pdf loader and show pdf container in HTML
		$("#pdf-loader").hide();
		$("#pdf-contents").show();
		$("#pdf-total-pages").text(__TOTAL_PAGES);

		// Show the first page
		showPage(1);
	}).catch(function(error) {
		// If error re-show the upload button
		$("#pdf-loader").hide();
		$("#upload-button").show();
		
		alert(error.message);
	});;
}

function showPage(page_no) {
	__PAGE_RENDERING_IN_PROGRESS = 1;
	__CURRENT_PAGE = page_no;

	// Disable Prev & Next buttons while page is being loaded
	$("#pdf-next, #pdf-prev").attr('disabled', 'disabled');

	// While page is being rendered hide the canvas and show a loading message
	$("#pdf-canvas").hide();
	$("#page-loader").show();

	// Update current page in HTML
	$("#pdf-current-page").text(page_no);
	
	// Fetch the page
	__PDF_DOC.getPage(page_no).then(function(page) {
		// As the canvas is of a fixed width we need to set the scale of the viewport accordingly
		var scale_required = __CANVAS.width / page.getViewport(1).width;

		// Get viewport of the page at required scale
		var viewport = page.getViewport(scale_required);

		// Set canvas height
		__CANVAS.height = viewport.height;

		var renderContext = {
			canvasContext: __CANVAS_CTX,
			viewport: viewport
		};
		
		// Render the page contents in the canvas
		page.render(renderContext).then(function() {
			__PAGE_RENDERING_IN_PROGRESS = 0;

			// Re-enable Prev & Next buttons
			$("#pdf-next, #pdf-prev").removeAttr('disabled');

			// Show the canvas and hide the page loader
			$("#pdf-canvas").show();
			$("#page-loader").hide();
		});
	});
}

// Upon click this should should trigger click on the #file-to-upload file input element
// This is better than showing the not-good-looking file input element
$("#upload-button").on('click', function() {
	$("#file-to-upload").trigger('click');
});

// When user chooses a PDF file
$("#file-to-upload").on('change', function() {
	// Validate whether PDF
    if(['application/pdf'].indexOf($("#file-to-upload").get(0).files[0].type) == -1) {
        alert('Error : Not a PDF');
        return;
    }

	$("#upload-button").hide();

	// Send the object url of the pdf
	showPDF(URL.createObjectURL($("#file-to-upload").get(0).files[0]));
});

// Previous page of the PDF
$("#pdf-prev").on('click', function() {
	if(__CURRENT_PAGE != 1)
		showPage(--__CURRENT_PAGE);
});

// Next page of the PDF
$("#pdf-next").on('click', function() {
	if(__CURRENT_PAGE != __TOTAL_PAGES)
		showPage(++__CURRENT_PAGE);
});

</script>
</body>
</html>
